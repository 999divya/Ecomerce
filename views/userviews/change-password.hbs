<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>





<div class="breadcrumbs">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 col-md-6 col-12">
                <div class="breadcrumbs-content">
                    <h1 class="page-title">User Profile</h1>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-12">
                <ul class="breadcrumb-nav">
                    <li><a href="/back-to-home"><i class="lni lni-home"></i> Home</a></li>
                    <li>Change password</li>
                </ul>
            </div>
        </div>
    </div>
</div>


<div class="account-login section pt-5 pb-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 offset-lg-3 col-md-10 offset-md-1 col-12">
                <div class="register-form">
                    <div class="title">
                        {{!-- <h3>No Account? Register</h3> --}}
                        {{!-- <h6 style="color:red">{{message}}</h6> --}}
                        {{#if message}}
                        <div id="test" class="alert alert-warning alert-dismissible">
                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                            <strong>{{message}}</strong>
                        </div>
                        {{/if}}
                    </div>
                    {{!-- from which route in which we are calling the post is what indicated by action--}}



                    <form class="row" id="savepassword">
                        <input type="text" value="{{userdetails._id}}" name="passid" style="display:none">
                        {{!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-fn">First Name</label>
                                <input class="form-control" type="text" name="fname" id="reg-fn" required>
                            </div>
                        </div> --}}
                        {{!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-ln">Last Name</label>
                                <input class="form-control" type="text" name="lname" id="reg-ln" required>
                            </div>
                        </div> --}}
                        {{!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-email">E-mail Address</label>
                                <input class="form-control" type="email" name="email" id="reg-email" required>
                            </div>
                        </div> --}}
                        {{!-- <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-phone">Phone Number</label>
                                <input class="form-control" type="text" name="mobile" id="reg-phone" required>
                            </div>
                        </div> --}}
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-pass">Old Password</label>
                                <input class="form-control" type="password" name="oldpass" id="reg-pass" required>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="reg-pass-confirm">New Password</label>
                                <input class="form-control" type="password" name="newpass" id="reg-pass-confirm"
                                    required>
                            </div>
                        </div>
                        <div class="button">
                            <button class="btn" onclick="changePassword(event)" type="submit">Save</button>
                        </div>
                        {{!-- <p class="outer-link">Already have an account? <a href="/login">Login Now</a>
                        </p> --}}
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>

    function changePassword(e) {
        e.preventDefault()
        $.ajax({

            url: '/save-password',
            method: 'post',
            data: $('#savepassword').serialize(),
            success: (response) => {

                if (response.status) {

                    swal.fire("Password changed successfully, please login with the new password!")
                        .then((value) => {
                            location.href = '/userprofile'
                        })

                }

            }


        })

    }



</script>